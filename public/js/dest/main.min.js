!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=function(){var a=this;this.playerNameErrorMessage=ko.observable(),this.errorField=ko.observable(""),this.roomName=ko.observable().extend({required:{message:"Room Name required"}}).extend({validation:{validator:function(){return!a.errorField||"roomName"!==a.errorField()},message:"Room name already in use."}}),this.playerName=ko.observable().extend({required:{message:"Name required"}}).extend({validation:{validator:function(){return!a.errorField||"playerName"!==a.errorField()},message:"Player name already in use."}})}},{}],2:[function(a,b){b.exports=function(){var a=this;this.message=ko.observable(),this.show=ko.computed(function(){return a.message()},!0),this.clearMessage=function(){a.message(void 0)}}},{}],3:[function(a){window.onload=function(){a("./socketManager.js").connect();var b=a("./page.js");ko.applyBindings(b)}},{"./page.js":5,"./socketManager.js":13}],4:[function(a,b){b.exports=function(){function a(a){alertify.log("Player "+a+" has joined the room")}function b(a){alertify.log("Player "+a+" has left the room")}function c(a){alertify.success("Joined room "+a)}function d(){alertify.log("You are now the owner of the room")}return{playerHasJoinedTheRoom:a,joinedRoom:c,promotionToOwner:d,playerHasLeftTheRoom:b}}()},{}],5:[function(a,b){b.exports=function(){function b(){return this.joinRoomViewModel.errorField(null),this.joinRoomViewModel.isValid()?(this.room.itemName.isModified(!1),this.loadMessageViewModel.message("Joining Room..."),void k.joinRoom(this.joinRoomViewModel.roomName(),this.joinRoomViewModel.playerName(),this.joinRoomSuccess,e)):void this.joinRoomViewModel.errors.showAllMessages()}function c(a,b){if(this.joinRoomViewModel.errorField(null),!b.keyCode||13===b.keyCode){if(!this.joinRoomViewModel.isValid())return void this.joinRoomViewModel.errors.showAllMessages();this.loadMessageViewModel.message("Create Room..."),k.createRoom(this.joinRoomViewModel.roomName(),this.joinRoomViewModel.playerName(),this.joinRoomSuccess,e)}}function d(a){l.joinedRoom(a.room.roomName),s.loadMessageViewModel.clearMessage(),o.init(),s.room.init(a)}function e(a){s.loadMessageViewModel.clearMessage(),s.joinRoomViewModel.errorField(a.errorField)}function f(a,b){return b.keyCode&&13!==b.keyCode?void 0:this.room.isValid()?void n.initiateItemEstimate(this.room.itemName()):void this.room.errors.showAllMessages()}function g(a){this.room.status(j.INGAME),this.room.itemName(a)}function h(){this.room.status(j.REVIEW)}function i(){this.room.status(j.WAITING),this.room.itemName(""),this.room.itemName.isModified(!1),this.selectedCard(void 0),_.each(this.room.players(),function(a){a.card(void 0)})}var j=a("./pageStatus.js"),k=a("./service/roomService.js"),l=a("./notify.js"),m=a("./room.js"),n=a("./service/gameService.js"),o=a("./socketListener.js"),p=a("./joinRoomViewModel.js"),q=a("./loadMessageViewModel.js"),r=function(){var a=this;this.cards=ko.observableArray(["1/2","1","2","4","8","13","20","40","100","?"]),this.joinRoomViewModel=new p,this.room=new m,this.loadMessageViewModel=new q,this.selectedCard=ko.observable(),this.joinRoomSuccess=d,this.startItemEstimate=g,this.review=h,this.endReview=i,this.createRoomRequest=c,this.joinRoomRequest=b,this.initiateItemEstimate=f,this.initiateReview=n.initiateReview,this.initiateEndReview=n.initiateEndReview,this.cardSelected=n.cardSelected,this.showGameTitle=ko.computed(function(){return a.room.isStatusInGame()||a.room.isStatusReview()},!0),this.statusClass=ko.computed(function(){return a.room.status()===j.WAITING?"waiting":a.room.status()===j.INGAME?"ingame":a.room.status()===j.REVIEW?"review":void 0},!0),this.anyCardsDown=ko.computed(function(){return void 0!==_.find(a.room.players(),function(a){return a.card()})}),this.joinRoomViewModel.errors=ko.validation.group(this.joinRoomViewModel),this.room.errors=ko.validation.group(this.room)},s=new r;return s}()},{"./joinRoomViewModel.js":1,"./loadMessageViewModel.js":2,"./notify.js":4,"./pageStatus.js":6,"./room.js":9,"./service/gameService.js":10,"./service/roomService.js":11,"./socketListener.js":12}],6:[function(a,b){b.exports=function(){return{INIT:0,WAITING:1,INGAME:2,REVIEW:3}}()},{}],7:[function(a,b){b.exports=function(a){this.playerName=ko.observable(a.playerName),this.card=ko.observable(a.card)}},{}],8:[function(a,b){b.exports=function(){function b(){var a=ko.observableArray([]);return a.add=c,a.removeByName=d,a.setPlayersCardValue=e,a}function c(a){this.push(new f(a))}function d(a){var b=_.filter(this(),function(b){return b.playerName()!==a});this(b)}function e(a,b){var c=_.find(this(),function(b){return b.playerName()===a});c&&c.card(b)}var f=a("./player.js");return{init:b}}()},{"./player.js":7}],9:[function(a,b){b.exports=function(){var b=a("./pageStatus.js"),c=a("./players.js"),d=this;this.status=ko.observable(b.INIT),this.isStatusInit=ko.computed(function(){return d.status()===b.INIT},!0),this.isStatusWaiting=ko.computed(function(){return d.status()===b.WAITING},!0),this.isStatusInGame=ko.computed(function(){return d.status()===b.INGAME},!0),this.isStatusReview=ko.computed(function(){return d.status()===b.REVIEW},!0),this.name=ko.observable(),this.playerName=ko.observable(),this.isOwner=ko.observable(!1),this.players=c.init(),this.itemName=ko.observable().extend({required:{message:"Item Name required"}}),this.init=function(a){var b=a.room.players||{};_.each(b,function(a){d.players.add(a)}),a.room.itemName&&d.itemName(a.room.itemName),d.name(a.room.roomName),d.playerName(a.playerName),d.status(a.room.status),d.isOwner(a.wasCreate)}}},{"./pageStatus.js":6,"./players.js":8}],10:[function(a,b){b.exports=function(){function b(a){var b=f.getSocket();b.emit("item.startEstimate",{itemName:a})}function c(){var a=f.getSocket();a.emit("item.showCards",{})}function d(){var a=f.getSocket();a.emit("item.finishReviewRequest",{})}function e(){var a=f.getSocket();a.emit("item.cardSelect",{card:this.selectedCard()})}var f=a("../socketManager.js");return{initiateItemEstimate:b,initiateReview:c,initiateEndReview:d,cardSelected:e}}()},{"../socketManager.js":13}],11:[function(a,b){b.exports=function(){function b(a,b,d,e){c(!1,a,b,d,e)}function c(a,b,c,d,f){var g=e.getSocket();g.once("room.joinConfirm",function(a){a.errorMessage?f(a):d(a)}),g.emit("room.join",{name:b,playerName:c,isCreateRequest:a})}function d(a,b,d,e){c(!0,a,b,d,e)}var e=a("../socketManager.js");return{joinRoom:b,createRoom:d}}()},{"../socketManager.js":13}],12:[function(a,b){b.exports=function(){function b(){var b=a("./page.js"),e=c.getSocket();e.on("player.new",function(a){d.playerHasJoinedTheRoom(a.playerName),b.room.players.add(a)}),e.on("item.estimateStarted",function(a){b.startItemEstimate(a.itemName)}),e.on("item.cardSelected",function(a){b.room.players.setPlayersCardValue(a.playerName,a.card)}),e.on("item.showCardsNow",function(){b.review()}),e.on("item.finishReview",function(){b.endReview()}),e.on("player.leave",function(a){d.playerHasLeftTheRoom(a.playerName),b.room.players.removeByName(a.playerName);var c=a.newHostPlayerName===b.room.playerName()&&!b.room.isOwner();c&&(d.promotionToOwner(),b.room.isOwner(a.newHostPlayerName===b.room.playerName()))})}var c=a("./socketManager.js"),d=a("./notify.js");return{init:b}}()},{"./notify.js":4,"./page.js":5,"./socketManager.js":13}],13:[function(a,b){b.exports=function(){function a(){return c=io.connect()}function b(){return c}var c;return{connect:a,getSocket:b}}()},{}]},{},[3]);
//# sourceMappingURL=main.min.js.map